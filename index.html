<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>IA Configurador de PC</title>
  <link rel="stylesheet" href="style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  <!-- Pantalla de login -->
  <div id="login-screen">
    <div class="login-container">
      <div class="login-content">
        <img src="https://api.dicebear.com/7.x/bottts/svg?seed=robot" class="login-logo" alt="Logo">
        <h1>Configurador de PC con IA</h1>
        <p>Escribe tu nombre y email para empezar</p>
        <form id="manual-login-form" autocomplete="off" style="display:flex;flex-direction:column;gap:12px;">
          <input id="user-name-input" name="name" type="text" placeholder="Tu nombre" maxlength="32" required autocomplete="off">
          <input id="user-email-input" name="email" type="email" placeholder="Tu email" maxlength="60" required autocomplete="off">
          <button type="submit" class="login-button">
            <img src="https://replit.com/public/images/logo-small.png" alt="Entrar" width="20">
            Entrar
          </button>
        </form>
      </div>
    </div>
  </div>

  <!-- App principal (s√≥lo cuando est√° logueado) -->
  <div id="main-app" style="display: none;">
    <header>
      <div class="header-content">
        <img src="https://api.dicebear.com/7.x/bottts/svg?seed=robot" class="header-logo" alt="Logo">
        <h1 class="app-title">Configurador de PC con IA</h1>
        <div class="user-info">
          <img id="user-avatar" class="user-avatar" alt="Usuario">
          <span id="user-name">Usuario</span>
          <button onclick="logout()" class="logout-btn">Cerrar sesi√≥n</button>
        </div>
      </div>
    </header>
    <main>
      <div class="monitor-outer">
        <div class="monitor-inner">
          <!-- Barra de progreso arriba -->
          <div class="progress-indicator">
            <div class="progress-bar-bg">
              <div class="progress-bar-fill" style="width: 40%;"></div>
            </div>
            <div class="progress-steps">
              <span class="progress-step active">Presupuesto</span>
              <span class="progress-step">Pregunta 2</span>
              <span class="progress-step">Pregunta 3</span>
              <span class="progress-step">Pregunta 4</span>
              <span class="progress-step">Pregunta 5</span>
            </div>
            <div class="progress-label">
              <span>Precisi√≥n de la recomendaci√≥n: <b>40%</b></span>
            </div>
          </div>
          <!-- Chatbox real -->
          <div id="chat-container">
            <div id="chat-log"></div>
            <form id="chat-form" autocomplete="off" style="display:flex; gap:8px;">
              <input type="text" id="chat-input" placeholder="Escribe tu mensaje...">
              <button type="button" id="mic-button" title="Hablar">üé§</button>
              <button type="submit">Enviar</button>
            </form>
          </div>
        </div>
        <div class="monitor-base"></div>
      </div>
      <!-- Contenedores de configuraci√≥n y fotos -->
      <div id="config-container"></div>
      <div id="fotos-container"></div>


    </main>
    <footer>
      <div class="footer-content">
        <span>Creado en Replit ¬∑ 2025</span>
      </div>
    </footer>
  </div>

  <!-- VAPI SDK with multiple fallbacks -->
  <script>
    // Cargar VAPI SDK con m√∫ltiples CDNs de respaldo
    function loadVapiSDK() {
      const urls = [
        'https://cdn.jsdelivr.net/npm/@vapi-ai/web@1.0.11/dist/index.js',
        'https://unpkg.com/@vapi-ai/web@1.0.11/dist/index.js',
        'https://cdn.skypack.dev/@vapi-ai/web@1.0.11'
      ];
      
      let currentIndex = 0;
      
      function tryLoad() {
        if (currentIndex >= urls.length) {
          console.error('‚ùå No se pudo cargar VAPI SDK desde ning√∫n CDN');
          window.vapiLoadFailed = true;
          return;
        }
        
        const script = document.createElement('script');
        script.src = urls[currentIndex];
        script.async = true;
        
        script.onload = function() {
          console.log('‚úÖ VAPI SDK cargado desde:', urls[currentIndex]);
          window.vapiLoaded = true;
        };
        
        script.onerror = function() {
          console.warn('‚ùå Fall√≥ cargar desde:', urls[currentIndex]);
          currentIndex++;
          tryLoad();
        };
        
        document.head.appendChild(script);
      }
      
      tryLoad();
    }
    
    loadVapiSDK();
  </script>
  <!-- Scripts locales -->
  <script src="script.js"></script>
</body>
</html>